# ERD Documentation - Quản lý hồ sơ công chứng

## Tổng quan
Tài liệu này mô tả chi tiết về Entity Relationship Diagram (ERD) cho module quản lý hồ sơ công chứng trong hệ thống.

## Các Entity chính

### 1. HoSoCongChung (Hồ sơ công chứng)
Là entity trung tâm của module, lưu trữ thông tin chung về hồ sơ công chứng.

**Thuộc tính:**
- `hoSoId` (PK): Mã hồ sơ, tự động tăng
- `tenGiaoDich`: Tên giao dịch công chứng
- `ngayCongChung`: Ngày công chứng
- `soCongChung`: Số công chứng
- `noiDung`: Nội dung giao dịch
- `giaTriHopDong`: Giá trị hợp đồng
- `congChungVienId` (FK): ID công chứng viên xử lý
- `toChucCongChungId` (FK): ID tổ chức công chứng
- `vanBanCongChung`: Link văn bản công chứng giấy
- `hoSoLuuTruDienTu`: Link hồ sơ lưu trữ điện tử
- `cacTaiLieuKhac`: Link các tài liệu khác
- `trangThai`: Trạng thái hồ sơ
- Các thuộc tính hệ thống: createdBy, updatedBy, createdAt, updatedAt

### 2. NguoiThamGiaGiaoDichCaNhan (Người tham gia giao dịch - Cá nhân)
Lưu trữ thông tin về các cá nhân tham gia trong giao dịch công chứng.

**Thuộc tính:**
- `nguoiThamGiaCaNhanId` (PK): ID bản ghi, tự động tăng
- `hoSoId` (FK): ID hồ sơ công chứng
- `hoVaTen`: Họ và tên
- `soGiayTo`: Số CMND/CCCD/Hộ chiếu
- `ngayCap`: Ngày cấp
- `noiCap`: Nơi cấp
- `diaChi`: Địa chỉ
- `soDienThoai`: Số điện thoại
- `email`: Email
- `loaiBenThamGia`: Loại bên tham gia (Bên A, Bên B, Bên liên quan)
- Các thuộc tính hệ thống: createdBy, updatedBy, createdAt, updatedAt

### 3. NguoiThamGiaGiaoDichToChuc (Người tham gia giao dịch - Tổ chức)
Lưu trữ thông tin về các tổ chức tham gia trong giao dịch công chứng.

**Thuộc tính:**
- `nguoiThamGiaToChucId` (PK): ID bản ghi, tự động tăng
- `hoSoId` (FK): ID hồ sơ công chứng
- `tenToChuc`: Tên tổ chức
- `maSoThue`: Mã số thuế
- `diaChi`: Địa chỉ
- `soDienThoai`: Số điện thoại
- `email`: Email
- `nguoiDaiDien`: Người đại diện theo pháp luật
- `chucVuNguoiDaiDien`: Chức vụ người đại diện
- `loaiBenThamGia`: Loại bên tham gia (Bên A, Bên B, Bên liên quan)
- Các thuộc tính hệ thống: createdBy, updatedBy, createdAt, updatedAt

### 4. TaiSan (Tài sản)
Lưu trữ thông tin về tài sản liên quan đến giao dịch công chứng.

**Thuộc tính:**
- `taiSanId` (PK): ID bản ghi, tự động tăng
- `hoSoId` (FK): ID hồ sơ công chứng
- `loaiTaiSan`: Loại tài sản (Đất ở, Đất nông nghiệp, Nhà ở, Xe ô tô, Xe máy, etc.)
- `diaChiTaiSan`: Địa chỉ tài sản
- `soGiayTo`: Số giấy tờ pháp lý (Sổ đỏ, Sổ hồng, etc.)
- `ngayCap`: Ngày cấp giấy tờ
- `noiCap`: Nơi cấp giấy tờ
- `dienTich`: Diện tích (m²)
- `giaTriTaiSan`: Giá trị tài sản
- `thongTinKhac`: Thông tin khác về tài sản
- Các thuộc tính hệ thống: createdBy, updatedBy, createdAt, updatedAt

### 5. LichSuCapNhatHoSo (Lịch sử cập nhật hồ sơ)
Lưu trữ lịch sử các thay đổi trên hồ sơ công chứng.

**Thuộc tính:**
- `lichSuCapNhatId` (PK): ID bản ghi, tự động tăng
- `hoSoId` (FK): ID hồ sơ công chứng
- `truongThongtinCapNhat`: Trường thông tin cập nhật
- `truongThongTinId`: Mã trường thông tin cập nhật
- `thayDoi`: Thông tin thay đổi
- Các thuộc tính hệ thống: createdAt, updatedAt, createdBy, updatedBy

### 6. CongChungVien (Công chứng viên)
Entity tham chiếu từ module quản lý công chứng viên.

**Thuộc tính chính:**
- `congChungVienId` (PK): ID công chứng viên
- `hoVaTen`: Họ và tên công chứng viên
- `soThe`: Số thẻ công chứng viên
- `toChucCongChungId` (FK): ID tổ chức công chứng

### 7. ToChucCongChung (Tổ chức công chứng)
Entity tham chiếu từ module quản lý tổ chức công chứng.

**Thuộc tính chính:**
- `toChucCongChungId` (PK): ID tổ chức công chứng
- `tenToChucCongChung`: Tên tổ chức công chứng
- `diaChi`: Địa chỉ trụ sở

## Mối quan hệ giữa các Entity

### Mối quan hệ chính
1. **HoSoCongChung (1) - NguoiThamGiaGiaoDichCaNhan (N)**
   - Một hồ sơ có thể có nhiều người tham gia cá nhân
   - Một người tham gia cá nhân chỉ thuộc một hồ sơ

2. **HoSoCongChung (1) - NguoiThamGiaGiaoDichToChuc (N)**
   - Một hồ sơ có thể có nhiều người tham gia tổ chức
   - Một người tham gia tổ chức chỉ thuộc một hồ sơ

3. **HoSoCongChung (1) - TaiSan (N)**
   - Một hồ sơ có thể có nhiều tài sản
   - Một tài sản chỉ thuộc một hồ sơ

4. **HoSoCongChung (1) - LichSuCapNhatHoSo (N)**
   - Một hồ sơ có thể có nhiều bản ghi lịch sử cập nhật
   - Một bản ghi lịch sử chỉ thuộc một hồ sơ

### Mối quan hệ với các entity khác
5. **HoSoCongChung (N) - CongChungVien (1)**
   - Một công chứng viên có thể xử lý nhiều hồ sơ
   - Một hồ sơ chỉ được xử lý bởi một công chứng viên

6. **HoSoCongChung (N) - ToChucCongChung (1)**
   - Một tổ chức công chứng có thể có nhiều hồ sơ
   - Một hồ sơ chỉ thuộc một tổ chức công chứng

7. **CongChungVien (N) - ToChucCongChung (1)**
   - Một tổ chức công chứng có thể có nhiều công chứng viên
   - Một công chứng viên chỉ làm việc tại một tổ chức công chứng

## Các ràng buộc nghiệp vụ
1. Mỗi hồ sơ công chứng phải có ít nhất một bên tham gia (cá nhân hoặc tổ chức)
2. Mỗi hồ sơ công chứng phải có ít nhất một tài sản (nếu là giao dịch về tài sản)
3. Mỗi hồ sơ công chứng phải được xử lý bởi một công chứng viên
4. Mỗi hồ sơ công chứng phải thuộc một tổ chức công chứng
5. Số công chứng phải là duy nhất trong phạm vi một tổ chức công chứng

## File liên quan
- ERD Diagram: [2.erd.puml](2.erd.puml)
- Logical Data Model: [3.ldm.puml](3.ldm.puml)
- Use Cases: [4.usecases/](4.usecases/)