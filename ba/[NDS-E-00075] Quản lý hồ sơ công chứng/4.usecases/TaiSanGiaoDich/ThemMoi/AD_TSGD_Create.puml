@startuml CreateAssetActivityDiagram
!theme plain
title UC_TSGD_Create - Thêm mới tài sản giao dịch

start
:Người dùng chọn chức năng "Thêm mới tài sản"
từ tab "Tài sản" trong form hồ sơ công chứng;
:Hệ thống hiển thị form thêm mới tài sản giao dịch;

:Người dùng chọn loại tài sản;

if (Loại tài sản?) then (Đất ở/Đất nông nghiệp)
  :Hiển thị form thông tin đất;
  :Người dùng nhập thông tin đất;
elseif (Nhà ở)
  :Hiển thị form thông tin nhà;
  :Người dùng nhập thông tin nhà;
elseif (Xe ô tô/Xe máy)
  :Hiển thị form thông tin xe;
  :Người dùng nhập thông tin xe;
elseif (Khác)
  :Hiển thị form thông tin tài sản khác;
  :Người dùng nhập thông tin tài sản khác;
endif

:Người dùng có thể liên kết tài sản với các bên liên quan;
:Người dùng bấm nút "Lưu";

:Hệ thống kiểm tra tính hợp lệ của dữ liệu;

if (Dữ liệu hợp lệ?) then (Có)
  :Lưu thông tin vào ENT_TaiSan;
  :Lưu thông tin chi tiết vào bảng tương ứng theo loại tài sản;
  :Hiển thị thông báo "Thêm mới tài sản thành công";
  :Cập nhật danh sách tài sản trong tab "Tài sản";
  :Đóng form thêm mới tài sản;
  stop
else (Không)
  if (Chưa điền thông tin bắt buộc?) then (Có)
    :Hiển thị thông báo yêu cầu điền thông tin bắt buộc;
  elseif (Sai định dạng thông tin?) then (Có)
    :Hiển thị thông báo lỗi "Thông tin không hợp lệ";
  elseif (Tài sản đã tồn tại?) then (Có)
    :Hiển thị thông báo lỗi "Tài sản này đã tồn tại trong hồ sơ";
  endif
  :Người dùng chỉnh sửa thông tin;
  if (Người dùng chọn "Hủy"?) then (Có)
    :Đóng form, không lưu dữ liệu;
    stop
  elseif (Người dùng chọn "Lưu" lại?) then (Có)
    :Hệ thống kiểm tra lại tính hợp lệ của dữ liệu;
  endif
endif

@enduml